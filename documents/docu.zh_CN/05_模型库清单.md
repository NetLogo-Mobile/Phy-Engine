# 05 模型库清单（按头文件）

本章按 `include/phy_engine/model/models/` 的头文件列出当前内置模型（器件/模块）。模型的“引脚顺序”和“attribute 索引”以各自头文件实现为准；文末给出查找建议。

提示：

- `include/phy_engine/phy_engine.h` 是一个便捷的“聚合头文件”，会包含常用模型与网表/电路接口；但并不一定包含全部模型（例如部分 controller/generator/non-linear 扩展在 `src/dll_main.cpp` 中额外使用）。
- 需要哪个模型，直接 `#include <phy_engine/model/models/.../*.h>` 最明确。

## 1) 线性/无源/受控源（`model/models/linear`）

常用：

- `resistance.h`：电阻
- `capacitor.h`：电容
- `inductor.h`：电感
- `VDC.h` / `VAC.h`：电压源（直流/交流）
- `IDC.h` / `IAC.h`：电流源（直流/交流）
- `VCCS.h` / `VCVS.h`：受控源（电压控制电流/电压）
- `CCCS.h` / `CCVS.h`：受控源（电流控制电流/电压）

扩展（同目录）：

- `transformer.h`：理想变压器
- `transformer_center_tap.h`：带中心抽头变压器
- `coupled_inductors.h`：互感电感
- `op_amp.h`：运放（理想/高增益近似）

## 2) 控制器/开关类（`model/models/controller`）

- `switch.h`：开关（SPST）
- `relay.h`：继电器
- `comparator.h`：比较器

## 3) 波形发生器（`model/models/generator`）

- `sawtooth.h`：锯齿波
- `square.h`：方波
- `pulse.h`：脉冲
- `triangle.h`：三角波

## 4) 非线性器件（`model/models/non-linear`）

- `PN_junction.h`：PN 结（二极管/结模型）
- `BJT_NPN.h` / `BJT_PNP.h`：双极型晶体管
- `nmosfet.h` / `pmosfet.h`：MOSFET
- `full_bridge_rectifier.h`：整流桥（便利模型）

## 5) 数字逻辑（`model/models/digital`）

### 5.1 基本逻辑门（`digital/logical`）

- `input.h` / `output.h`：数字输入/输出端口
- `and.h` / `or.h` / `not.h` / `xor.h` / `xnor.h`
- `nand.h` / `nor.h`
- `implication.h` / `non_implication.h`
- `tri_state.h`：三态驱动（Z）
- `resolve2.h`：两路驱动解析（含 X/Z 语义）
- `case_eq.h`：`===` 语义相关
- `is_unknown.h`：X/Z 检测
- `tick_delay.h`：tick 延迟
- `eight_bit_input.h` / `eight_bit_display.h`：8-bit 宏 IO
- `schmitt_trigger.h`：施密特触发器（模拟阈值↔数字）

### 5.2 组合/时序模块（`digital/combinational`）

- `half_adder.h` / `full_adder.h`
- `half_subtractor.h` / `full_subtractor.h`
- `mul2.h`：2-bit 乘法器
- `d_ff.h` / `d_ff_arstn.h`：D 触发器（含异步复位版本）
- `d_latch.h`：锁存器
- `jk_ff.h` / `t_ff.h` / `t_bar_ff.h`
- `counter4.h` / `random_generator4.h`

### 5.3 Verilog 相关模型

- `verilog_module.h`：把 `verilog::digital` 的 runtime 作为一个“数字器件”嵌入电路（支持端口连到模拟/混合节点，靠阈值 Ll/Hl 转换）
- `verilog_ports.h`：动态 pin 的占位模型（用于综合/导出等场景暴露 port 列表）

## 6) 如何确认 pin 顺序与 attribute

推荐做法：

1. 直接打开对应头文件（如 `include/phy_engine/model/models/linear/VDC.h`）
2. 搜索 `generate_pin_view_define`（pin 顺序）和 `get_attribute_name_define`（属性名/索引）
3. 参考 `test/` 中的连线示例（例如 `test/0004.solver/op.cpp`、`test/0006.digital/digital.cpp`）

